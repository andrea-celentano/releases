Changelog for GEMC
==================



4/8/16
 - fixed option repetition bug
 - NO_FIELD repetitions set to zero

4/7/16
 - resetting option repetition if so directed
   if repe is 1, options can be accumulated from the gcard
 - defaulting SPREAD to phasespace, cos(theta) is flat, not theta, unless flag "flat" is given to the SPREAD option
 - better comments for SPREAD_P
 - fixes to luminosity theta spread

4/6/16
 - fixed bdx hit process warnings
 - dc smearing / inefficiency:
   * smearing parameters, including scale, in database
   * inefficiency function, including scale, in database
   * if a wire is inefficient, its index is negative

4/5/16
 - reading CCDB_CONNECTION env variable to connect various hit process routine
	to CCDB. This can be set to a mysqlite file. If env is not set, reverting to jlab server.


3/31/16
 - moved user actions initializations to ActionInitialization
 - added EVTN option to set event number

3/22/16
 - when background is being saved, all tracks passing by detectors
   are saved even if they do not deposit energy

3/21/16
 - adding verbosity to map field loading routines 

3/18/16
 - to physics catalogue:
 - hPairProd
 - ionIon
 - tInelastic
 - kaon-Inelastic
 - added notice in V(t) routine
 - implemented rayleigh scattering in the material properties, both mysql and text factories
 - fixed luminosity bug in setting number of particles
 - fixed luminosity bug in setting vertex spread properly

3/17/16
 - Modified time-walk functional to follow Haiyun's recommendation


3/11/16
 - removed unnecessary trueInfos instantiation in bst hit process

3/9/16
 - finalized background saving algorithm
 - saving time information of the track
 - adding MERGE_LUND_BG option to merge events from the LUND format.
   This includes timing information.
 - MERGE_LUND_BG option is now operative

3/8/16
 - parsing micromegas hit process routine
 - with SAVE_ALL_MOTHERS set to 2, all particles generating hits are saved in LUND format
   exception: if the mother also is a particle generating hit, only the mother is saved - unless SAVE_ALL_MOTHERS is set to 3
   Implementation not complete on 3/8/16

3/7/16
 - added time to bst digitized info. bco is a random number between 0 and 255.
 - normalizing cosmics distribution to lower momentum limit

3/4/16
 - fixed bst routine
 - added export to PDF button

3/2/16
 - removed CCGas from hardcoded cpp materials, added in ltcc system
 - refurbished ltcc hit process routine. Added nphotonarrived variables as opposed to detected.
 - minor improvements on htcc hit process routine

3/1/16
 - added 100 segments lines per circle when inspecting a detector
 - fixed strip identification for bst routine
 - added max number of steps for a track: 10,000. Apparently there are situations where
   particles loop too much in a magnetic field

2/29/16
 - removed obsolete cpp materials
 - added button to write single volumes or all volumes to WRL

2/9/16
 - added muPairProd to the map of processes in the output
 - added buttons to export a detector or the whole root in gdml format
 - added button to inspect detector in a new window
 - added buttons to print screenshots in png EPS format

2/7/16
 - added cerenkov to the map of processes in the output
 - better description for some true information variables
 - added dInelastic in the map of processes in the output
 - htcc pmt material had a refraction index that caused infinite
   bouncing of optical photons between the pmt glass limits!
 - correction: fixing bouncing of photons by limiting the
   number of steps to 100. Notice there are rarely above 20 steps
   for CC detectors.

2/2/16
 - making doxygen more happy
 - changing caching of the maps to 1 meter by default. This should be an option.
 - making step sizes explicit in field routine

2/1/16
 - Process names replaced with process ID in MHit. A map of names to process ID is in place and documented.
   The list of process may not contain all - a log is printed on screen if a process does not have an ID - so they can be added later on.
 - changed changelog for better formatting in documentation. Also, the previous log (up to 2008) will be added later.

1/22/16
 - forcing all volumes to be solids when doing slices. This seems to solve all slice-related problems, probably
   due to a mix of wireframe / solid volumes.

1/12/16
 - changed ftot ccdb connection to reader instead of writer

12/22/15
 - added injector bubble hit process routine
 - better log output for luminosity option

12/14/15
 - fixed typo in description of INTEGRATEDDGT option
 - Luminosity particle properties are now the same for every particle in the beam bunch.
   This apparently is more efficient for geant4. It also speeds up the simulation
   considerably and seems to prevents code hangs.
 - fixed log on luminosity particles

12/8/15
 - fixed warning in ec and pcal digitization
 - better log for material warning

12/2/15
 - added reference in the code to cosmic model
 - added ADC e TDC in ft_hodo

11/30/15
 - init run number with option map by default
 - fixed beam log
 - do not init hit process routines at start, waiting until end of first event
 - text materials are now backward compatible
 - merged ec and pcal hit process from Cole Smith. Instantiation of those constants class with -1.
 - commented out screen log (will need a verbosity mechanism though)
 - RUNNO -help shows default of 1

11/25/15
 - fixed replicas routines.

11/19/15
 - fixed vertex for cosmic rays

11/18/15
 - added Trigger Summary plot and option in the dropdown menu

11/17/15
 - accessing CCDB database in ftof digitization routine

11/16/15
 - default runNo set to 1 (fixed case when in GUI mode a different runno was set)
 - added COSMICAREA option to define the area where the cosmic ray will go through,
   in the form (x, y, z) and radius.

11/13/15
 - added COSMICRAYS option, small utility macro to show the distribution
 - removed some unnecessary variables in MPRimaryGeneratorAction

11/12/15
 - added graphing of the FADC signal. The shape and intensity of the signal should be optimized for each detector
 - trigger signal added to hit
 - display of trigger added to trigger gui
 - dropdown menu to decide to plot voltage, trigger, or both

11/10/15
 - graphs now are handled by a separate library
 - fixed graphs limits

11/6/15
 - added bunch sampling of the voltage vs signal time. Data structure name is quantumS, map<int, int>
 - added TSAMPLING option: first number is time interval of sampling (typically 4 ns for FADC)
   and the second number is the total event time

11/5/15
 - Making sure the numeric conditions on reading maps is the en_US
   some other country may interpret the dot or commas differently (e.g. 1.0 is 1,0 in some country)

11/3/15
 - time resolution is an external parameter "VTRESOLUTION"
 - fixed production threshold for flux detectors (Zhiwen), was 1000 eV should be 1mm

11/2/15
 - Added more verbosity in cylindrical.cc

10/30/15
 - preparing for FADC mode 1
 - fixing region assignment in case some volume is an operation

10/30/15
 - detector: added explicit optimization in the constructor
 - default cut coming from PRODUCTIONCUT flag now instead of being hardcoded. Default value is 1cm
 - output: added nsteps in the true info banks
 - added system in the sensitive detector class
 - production cut will now affect all volumes in a system rather than just the sensitive volumes
 - better verbosity for event action
 - default material reverted to vacuum

10/21/15
 - typo fixed in htcc hit process

10/20/15
 - merged from Nick: added time infos to htcc routine

10/2/15
 - fixed bst energy sharing routine.
 - added bonus hit process routine

8/6/15
 - overloaded get_info with extra argument: fixed bug that affected particles that 
   contain parenthesis in the name. Volker found this one after 5 minutes of playing with the code!

7/28/15
 - fixed number of material entries for devel (rayleigh makes it 18 not 17)
 - fixed typo on materials api

7/24/15
 - added rayleigh property in materials api and material factory

7/15/15
 - fixed processName routine, sometimes the trk->GetCreatorProcess() is null
 - added warning suppressor for compiling on Mac
 - added gemc version on the log

6/10/15
 - fixed mysql material query, it was not getting the optical info

6/4/15
 - added process name and material name in the Hit class
 - saving process and material names in the Hit class from SensitiveDetector.cc

6/2/15
 - fix: setting run number at each event instead of only with message log

5/28/15
 - added unsmeared and smeard tdc for clas12 ftof

5/26/15
 - improved log for LUND format
 - improved ftof digitization routines
 - added runWeights class. This class reads a text file with two columns: run and weight
   The class contain a map<int, int> which contains the number of events for each run number.
   The number of events is based on the number of events desired by the user and the weight table.
 - added RUN_WEIGHTS option. The argument is a text file with two columns: run number and its luminosity
   weight. GEMC will distribute the number of events requested among the run list according to their weight.
   The calibration constants, including status, are re-read from the user databases at each run number change.


5/20/15
 - added active fields in the option map so they are written in the output (as simulation conditions)

5/15/15
 - setting hadronic physics list to "none" by default. User can enable them in the gcard or
   command line. This way one can choose to run w/o hadronic physics.

5/13/15
 - Daria's' changes to cnd hit process routine
 - fixed bug that wrote summary particle evio bank multiple times
 - writing summary particle evio bank only if SAVE_ALL_MOTHER is set to 1

5/11/15
 - committed previous changes in material API
 - ported latest cnd hit process routine
 - suppressing compiler warning (from clhep) with -Wno-absolute-value

4/21/15
 - added scintillation in the material definition, both in API and in the gemc core.
   The number of photons emitted has two component (fast and slow) and is proportional two::

       A e^(-t/tfast) + B e ^(-t/tslow)

   where A and B are the fast and slow component respectively and are dependent on wavelength,
   and tfast and tslow are the fast and slow time constant (valid for all wavelengths).

   The following quantities can now be specified in the material API, and will be read by gemc.

   * fastcomponent: vector (wavelength)
   * slowcomponent: vector (wavelength)
   * scintillationyield: number of photons / MeV
   * resolutionscale: scale to control the resolution (multiplies sqrt(N))
   * fasttimeconstant: fast time constant
   * slowtimeconstant: slow time constant
   * yieldratio: relative strength of the fast component


4/17/15
 - ftof time smearing


4/14/15
 - fixed energy sharing calculation on bst routine

4/10/15
 - added ND3 and deuterium gas materials


4/8/15
 - Added template for calibration constants
 - FTOF digitization. Retrieving and using constants

  * status
  * effective velocity
  * attenuation length
  * de/dx
  * time walk correction
  * minimum ionizing calibration peak

3/26/15
 - removed obsolete cpp materials, defined in SVT

2/18/15
 - fixed bug that prevented material creation from isotopes
 - fixed bug that duplicated materials when verbodity was high
 - added instructions on how to add the perl module for DBD in yosemite

2/11/15
 - fixed bug that caused gemc to ask for graphic display even in batch mode.

2/9/15
 - removed gl.h no longer needed

2/5/15
 - Added generic trapozoid constructor (2.2 as well)

2/4/15
 - lowercasing cnd hitprocess (2.2 as well)

2/3/15
 - fixed font size in both devel and 2.2 so that icons titles fit well in the GUI in Linux
   (2.2 as well)


.. Note::
   1/29/15 gemc 2.2 released!

|

1/28/15
 - added utility function to convert vector<int> to vector<double>. Used in g4signal
 - added local positions, vertex and mother vertex info in GUI display
 - defaulted mother vertex position in case SAVE_ALL_MOTHERS is not set

1/27/15
 - fixed instance where Trk and Original Trk was not displaying correctly in the GUI
 - improved signal screen bounds
 - refreshing hit list in signals when beamOn() is issued

1/26/15
 - included rich hitprocess in the map register
 - setting GUI vtx values to options value
 - removed parent widget from momControls and vtxControl, unnecessary

1/23/15
 - setting GUI momentum values to options value

1/20/15
 - added slices in the 3 dimensions in the camera gui:
   axis plane + cutaway activation button. All units are mm
 - added inverse checkbutton for the axis direction of the slices
 - fixed unit order for theta angles in the luminosity tab
 - fixed luminosity particle smearing.

12/9/14
 - camera now is the default choice for slider moves
 - introducing "explode" factor  - combobox

12/5/14
 - default initial position of windows can now be set with options
 - by default both windows are now next to each other

12/1/14
 - changed particle vertex sliders into LineEdit
 - spread in the guis now also for luminosity beams

11/18/14
 - Added QTimer to be able to stop cylcing events
 - Moved number of events on gui top  - removed from runControl tab
 - Increased memory storage for opengl tracks
 - changed particle momemtnum sliders into LineEdit

11/17/14
 - added run and cycle and quit button on top of interface

11/14/14
 - run control replaced by generator control
 - icons changed accordingly
 - beam on, quit, beam every 2 sec, n. of events will now be present at top.
 - added ecs process routine, EC with strip
 - fixed doubled initialization of isotopes

11/13/14
 - icons change. The gui will change as well. This is work in progress,
   the gemc usability is limited until GUI work is complete.

11/11/14
 - removed obsolete changelog_2.0
 - removed dependency from webkit


11/6/14
 - Changed Headers/QtWidgets to QtWidgets  - now Mac and Linux installations match

11/3/14
 - running EXEC_MACRO before running events

10/29/14
 - Fixed bug in uniform field constructor: was using wrong constructor.

10/27/14
 - Fixed header for missing G4BestUnit 


10/22/14
 - Development version will be 2.2
 - Adapted code for qt5: QtGui >> QtWidgets
 - Using CLHEP namespace for constants and units
 - Removing G4UnitsTable.hh since using CLHEP namespace  - except where G4BestUnit needed
 - Notice: new compilation flags will give lot of variable shadowing warning due to CLHEP units
   Be patient, all these will be fixed in time
 - Physics list ported to geant4 v 10



.. Note::
   10/22/14 gemc 2.1 released!

|

10/21/14
 - simplified left buttons code
 - version changed to 2.1
 - lowercasing hit process routines

9/22/14
 - Added run time log output for gemc: total time  - and just events time (w/o initialization)

9/17/14
 - Added bco and adc in the svt digitization


9/15/14
 - fixed G4PVReplica bug on number of dimensions

9/10/14
 - Step by step true information can now be written out with ALLRAWS option.
   ALLRAWS is a string containing one or more sensitive detector (element in the list separated by a comma).
   For example  -ALLRAWS="dc, ec"  will write out all steps for dc and ec detectors.
 - Fixed a major bug when a vector is not cleared every event, causing huge file size
 - Fix a minor bug when read beamPol from wrong position


8/18/14
 - Preferring z position for solenoid field, adding else statement provides minor speed up.
 - Setting MAX_FIELD_STEP to zero by default.

8/15/14
 - Fixed  -BEAM_P="show_all" option

8/14/14
 - Fixed more units in the EVIO/TXT output

8/13/14
 - Returning generated particles variables in default G4 units (MeV and mm)

8/1/14
 - Removed condition on number of steps. New geant4 navigation seems to take care of this. gemc is faster now!
 - Improved log in SteppingAction
 - Made Hall dimension and MAX_STEPS consistent at 20m by default. Users can always modify this with options.

7/29/14
 - Fixed issue that may occur when material properties are not defined
 - Added standard isotopes LD2 and Helium3 gas for all material factories

7/28/14
 - Fixed precision issue on material composition

7/25/14
 - Fixed log message for bank IO, typo in help for external generator

7/15/14
 - Fixed issue affecting multiples hits on the same sensitive detector
 - Fixed issue that ignored digitized type for double type variables

7/10/14
 - Fixed issue that may shows on Linux when multiples materials are defined with similar names (erase items from material map now down outside map loop)

7/9/14
 - Fixed Initialization of mini_stagger_shift into hit process routine constructor
 - Changed gemc version string to 2.0

7/7/14
 - Added PCAL process routine
 - Fixed generated particle summary tags and numes
 - Fixed NSTRIPS ec variable being defined in the wrong place

6/18/14
 - fixed dipole map reading typo

6/17/14
 - Added nphe in summary output. Notice: this is before any digitization.


6/16/14
 - Fixed bug: lundUserDefined vector was not emptied each event

6/13/14
 - Completed port of magnetic field
 - progress bar for dipole and cylindrical maps
 - optimization of map reading routines.
 - fixed typo in kilogauss unit
 - removed old magnetic field class as the port is complete
 - reading ascii magnetic field maps with fscanf instead of C++ cin. This is about four times faster
 - field load message enable even with 0 verbosity

6/12/14
 - added dc lowercased  - bank variable with better names
 - adding G4StepLimiter to make the user step size effective
 - added kilogauss unit
 - ported phi-segmented field map (for clas12 torus)
 - better field log (include correct units)
 - added progress bar indicator for magnetic field loading
 - note: implementation not completed  - committing anyway.

6/11/14
 - removed unnecessary variables in bst hit process
 - fixed lowercased ec process name


6/10/14
 - removed ec material, now in ec package
 - added ec hit process routined, lowercased from 1.8
 - better log loading bank definitions
 - fixed instance of bank loading when definition file in custom directory

6/9/14
 - LUND event format: the following names has been changed for the LUND format. Users can keep the
   original LUND meaning or assign custom meaning::

    var1  - User defined. In LUND this was: Target Polarization
    var2  - User defined. In LUND this was: Number of nucleons in the target
    var3  - User defined. In LUND this was: Number of protons in the target
    var4  - User defined. In LUND this was: Bjorken x
    var5  - User defined. In LUND this was: Fraction of energy loss
    var6  - User defined. In LUND this was: W square
    var7  - User defined. In LUND this was: Q square
    var8  - User defined. In LUND this was: Energy loss

 - Do not exit if bank or hit definition TEXT files are not found.
 - Added these 8 variables in header bank for gemc internal generator
 - fixed inconsistency in header infos for LUND format

6/6/14
 - added htcc hitprocess (lowercased)
 - signal now displaying photon wavelength versus timing

6/5/14
 - overloaded << for sensitiveID object
 - calling integrateRaw by default, but writing the true info bank only if INTEGRATEDRAW is
   true for a given detector
 - HTCC renamed to htcc

6/4/14
 - isMirror changed to buildMirrors  - for border surface we need all physical volumes to be built first.
 - removed goptions argument from MDetectorConstruction method as it is a class member
 - added arrayToString to perl utilities
 - Mirrors detector name changed to "mirror"

6/3/14
 - FTM lowercased to ftm
 - Added mirrors perl interface
 - Added mirrors factories to gemc
 - Material factory cosmetics to make both mirrors and factory more consistent
 - Added verbosity flag for mirrors
 - scons inc path organized by packages in SConstruct

6/2/14
 - Maurik Holtrop:
   - Fix up the STEER_BEAM option. The BEAM_P and BEAM_V were no longer propagated when using an StdHep file.
   - Fixed name mismatch in HPS hit process routines.

5/30/14
 - added "-h" option that does the same thing as "-h"
 - fixed integrateRaw to match variables name changes


5/28/14
 - added Trimspaces to vector<string> functions
 - run_conditions: get_systems() now returns a map<string, string> : name, factory
 - bank scheme changed as requested from Hall-B software group

  Reason: makes it more readable by 3rd party software.
  I'm opposed to this, I think we should be driven by human readability instead of 3rd party software
  from::

    Mother (tag, 0)
     daughter (tag, daughter id)
       vars (tag + daughter id, variable id)

  to::

   Mother (tag, 0)
    daughter (tag + daughter id, 0)
    vars (tag + daughter id, variable id)

 - hit number now changed num from 0 to 99
 - Fixed multiple writing of the generated particle bank
 - Names of average quantities in the true info output changed from <v> to avg_v
 - Times font changed to Times-Roman. This doesn't help Maverick screen log whining yet.
 - Better log in case argument not recognized OR file not found


5/27/14
 - added utility function get_strings_except(string, string) to get a vector<string> from a string,
   ignoring matches to second argument.
 - removed sensitiveDetectorFactories no more needed
 - Loading of the banks is now independent of sensitive detectors. Getting close to use gbank as stand-alone
 - IO bank text API changed: removed variation from filename
 - NOTE: This commit does not compile, work is not completed.

5/23/14
 - Initialization of header bank infos
 - Removed extra debug comment

5/22/14
 - Fixed instances of flux bank being put inside existing detector bank
 - Added utility to retrieve generated particle infos from a string

5/14/14
 - Skipping loading bank definitions from file if it's the flux bank
 - Fixed wrong return code for VOLTAGETIME_ID
 - Fixed bst hit process assignment
 - number correction in bst hit process (todo: make it external parameter)
 - Better code comments
 - Removed confusing ":" in run condtions map key

5/13/14
 - Added warnings for malformed materials

5/12/14
 - Added bst hit process to 2.0

5/8/14
 - Fixed warning: no need to print unit warning when a number is zero
 - GEMC will now try to load detector TEXT factories in GEMC_DATA_DIR in addition to current directory

5/6/14
 - Material factory: removing map item by key instead of iterator (which caused problems on some compiler).


5/2/14
 - Improved log for cases when the variation is changed within the API scripts
   to build several variations at the same time
 - Fixed bug that checked the existance of materials

5/1/14
 - Added optical properties in gemc


4/29/14
 - Changes to geometry service api
 - Renamed LUND header names
 - Added optical properties in the API
 - added <unistd.h> needed for get_pid


4/23/2014
 - Added Total Edep, Fastest time, to generated particle information in both EVIO and TXT output factories
 - Added stat, number of volumes hit / detector,  to generated particle information in both EVIO and TXT output factories


4/22/2014

 - Added original track information to hit: now one can track which original track was responsible
   for hits!
   This must be activated with  SAVE_ALL_MOTHERS, and INTEGRATEDRAW must contain
   the name of the sensitive detector of interest.


4/15/2014
 - solid pictures resized for better desplayed
 - Reorganized detector information window. Added material, type and dimensions, sensitivity.
 - Materials: if the material file is not found, it's ok  - it may be a pre-defined G4 material.
 - default variation is main
 - add check for physics list name
 - add LIV and PEN for EM, add FTFP_BERT_HP for hadron


4/2/2014
 - Removing obsolete MATERIALSDB option.
 - Added TEXT factory
 - Adding materials initialization in buildmaterials for CPP, MYSQL, TEXT and GDML factories.
 - Do not open factory connection if no detector needs it
 - Fixed help


4/1/2014
 - Changed elements, nelements to components, ncomponents
 - Added simple materials from MYSQL factory in addition to the CPP factory:

 1. molecular. Example::

     H2O->AddElement(H, natoms=2);
	  H2O->AddElement(O, natoms=1);

 2. by mass fraction. Example::

	  Gas->AddMaterial(matman->FindOrBuildMaterial("G4_H"), 0.2);

 - Air > G4_AIR as default Air material

3/31/2014
 - bug fix in the dtheta setting line 127. All the rest is tab formatting changes

3/23/2014
 - FT process routine fixed
 - Very minor, better include statement for types.h

3/22/2014
 - add scalefactor for multipole field


3/12/2014
 - CTOF fixes:
 - forgot to change x to y when calculating tdc
 - fixed length from trapezoid in ctof hit process
 - fixed length from trapezoid in ctof hit process

3/5/2014
 - fixed path for stdhep generator

3/4/2014
 - fixed bug that caused gemc to ask for graphic display even in batch mode.

3/3/2014
 - Add colors for muons. Useful for a muon detector.
 - Resurrect the StdHEP input file reader from GEMC 1.9
 - Check for units.
 - Check for correct data input size. This is critical, because additional values are added at the end.
 - general improvements and fixes. Adding material mysql and text api
 - Change to get_number: now takes extra, optional, option, warn_no_unit,
   to make sure a unit is supplied. For numbers, we now check if the number
   is valid and give a warning if there are unexpected characters.
   This still does NOT detect ’12.+3.4’ type entries, because + and - are
   valid number characters. In future, change to a regex parse.
 - Very minor change: if a command line option is not recognized, continue anyway.
   Mac OS adds a number of options to the command line that can cause GEMC to
   quit without good reason, also, if you want to run the Xcode debugger.


2/14/2014
 - deleting text files only on first export
 - static variable to print last geometry id only once. Now parameters, materials, bank and hit entries can be updated not just inserted
 - scripts improvements. Material added in mysql db scheme

2/12/2014
 - Add the HPS hitprocess files
 - Initial checkin of refactored HPS hit code
 - fixed confusion between encrypt / decrypt
 - added T/m unit.


2/11/2014
 - gbank and output factories improvements to make it more general.
   options now accept a third argument <ignore> in case the library is
   linked to another application accepting options in a different fashion


2/4/2014
 - adding warning for TEXT and MYSQL factory if a detector already exist in the current factory
 - material i/o changes. Changelog updated for upcoming beta3

1/15/2014
 - saving polarization for first particle


1/14/2014
 - add multipole field by Zhiwen Zhao


1/13/2014
 - Removing the 1000 steps limitation as it create problems with large volumes with magnetic fields

11/21/2013
 - experimental hall dimensions can be set with options. Default: 40mx40mx40m
 - typo fixed in the help for DF option
 - adding drag and drop capability for configuration files (gcard). Adding full LUND header in the output stream

11/1/2013
 - adding icon for doxygen documentation. Preparing to drag and drop gcard file to gemc app


10/31/2013
 - added c++ detector factory from a library plugin. Clara can use this plugin for geometry.



7/29/2013
 - Modular physics list added.

   User can choose among several hadronic physics list, e.m. physics list,
   to activate or not high precision cross sections or optical physics.

   The option is::

     -PHYSICS="HADRONIC + <EM> + <HP> + <OPTICAL>"

   Where Hadronic can be:

    - CHIPS
    - FTFP_BERT
    - FTFP_BERT_TRV
    - FTFP_BERT_HP
    - FTF_BIC
    - LHEP
    - QGSC_BERT
    - QGSP
    - QGSP_BERT
    - QGSP_BERT_CHIPS
    - QGSP_BERT_HP
    - QGSP_BIC
    - QGSP_BIC_HP
    - QGSP_FTFP_BERT
    - QGS_BIC
    - QGSP_INCLXX

   EM is standard STD by default, it's optional and can be:
    - STD
    - EMV
    - EMX
    - EMY
    - EMZ
    - LIV
    - PEN


7/26/2013
 - progress toward modular physics for the new geant4


7/25/2013
 - modula physics progress
 - adding physics list interface GUI
 - adding source button image for physics


7/24/2013
 - adding GUI for physics. Adding Physics list messenger. Re-organizing physics list with modular physics

7/2/2013
 - modified SConstruct - libraries organized in categories.
 - adding devel source in phys12 repo
 - moving io to new location
 - Added devel directory for gemc

4/29/2013
 - removed obsolete SECONDARIES option

1/24/2013
 - using string utilities to get luminosity info
 - improved get_number routine - this will be ported to 2.0 also. Still some
   small quircks when the GUI overwrite beam values

1/23/2013
 - propagating the magnetic field to the whole genealogy - building root mother volume in detector io.
   These changes are propagated in 2.0 also

12/11/2012
 - fixed bug in calculating dipole field for maps.

.. Note::
   12/06/2012 gemc 1.8 released!

|

12/03/2012
 - removed Obsolete methods Get/SetModel() in preparation for 4.9.6. Default model is defined in the constructor anyway

11/15/2012
 - Improve QT path handling for plugins. Fix issues with Aprime hitprocessing.

.. Note::
   10/24/2012 gemc 1.7 released!

|


10/24/2012
 - Introducing a new option ALIGN_ZAXIS to align z axis to a custom direction. Options:

   - "beamp"  aligns z axis to the beam directions specified by BEAM_P.
   - "custom, theta*unit, phi*unit" aligns z axis to a custom direction, changes BEAM_P reference frame.

   With the new option the SPREAD_P will use the new coordinate system.

10/23/2012

 - Adding styles to the GUI:

   - QPlastiqueStyle
   - QCleanlooksStyle
   - QMacStyle (soon removed as not present on some machines)
   - QWindowsStyle
   - QMotifStyle

   Selectable at command line with the QTSTYLE option. Example: -QTSTYLE=QWindowsStyle

 - Adding shared object .os in the pedit ignore of svn
 - Added LIBRARY command line option to compile gemc as a static or shared library
 - Fixed Set function in G4TrajectoryDrawByParticleID - passing particle name instead of charge
 - Fixed typo introduced with previous commit
 - Explicit double > int conversion to make compiler happy
 - More utilities moved to string_utilities.
 - Fixed get_strings routine not to discard last element in the vector.
 - Fixed mysql i/o routine to account for get_string change
 - Improved routines run_control and MPrimaryGeneratorAction to read parameters
   from command line or gcard.
 - copy_parameters and copy_materials now working with GEMC_USER env. variable


10/22/2012

 - This commit is brings some code clean up:

   1. New file string_utilities has been added. All string manipulations function
      is being moved here. All headers are modified accordingly
   2. In the process of cleaning up code, removing obsolete functions and make better comments
   3. By default the values of MAX_[XYZ]_POS variable has been set to 30m instead of 7m.
      This allows for bigger setups than CLAS.


10/16/2012
 - using vrml2 as output format instead of vrml1

10/12/2012
 - Compatibility with clang compiler, you cannot create an array of non POD (plain old data) objects without using new.
 - Added energy sharing in HS hit process for aprime experiment

10/11/2012
 - Added scintillator light attenuation for ADC digitization using lambda=376 cm.
 - Tweaked photoelectron statistics to match PCAL measurements.
 - Made digitization code same as for EC for now to simplify.
 - Tweaked photoelectron statistics to match cosmic ray data MIP peak sigmas.

10/8/2012

 - Increased ROOT volume to 120m
	This should be an external parameter actually. Added feature request on mantis


8/31/2012
 - Code now gets digitization parameters from the gpars array instead of being hardwired.


8/16/2012
 - Commented out a rogue print statement.
 - Added file for ECwithG4strips to hit process file list.
 - Add bank for ECwithG4strips which is the bank for the EC using individual
   strips in the scintillator layer instead of a single large slab. The bank structure is the same as the EC.
 - Added ECwithG4strips to list of banks.
 - Cleaned up code and added some more comments.

7/31/2012
 - Check to make sure that JLAB_ROOT is set.

7/25/2012
 - move out of gemc old svn tree

7/10/2012
 - moving gemc to new svn directory
 - reformatted table list for better visualization

6/22/2012
 - Fixed par type for PARAMETERDB.
 - Implemented Simulation Condition for TEXT output.
 - Added EVIO support for simulation conditions.
   This finalize the writing of condition in the data file, as a bank of strings.

   Example::

    option: LUMI_P:  e-, 11*GeV, 0*deg, 0*deg

 - Added option RUNNO to tag the geometry
 - Implemented gcard rotation
 - Added map with simulation conditions (parameters, shifts and rotations from nominal geometry) to be stored in the output file

6/14/2012
 - Documentation written on the MM digitization routine

6/7/2012
 - Documentation for BST hit process

6/4/2012
 - Added capability to perform Boolean operations on solids assuming coordinates and
   rotations of both solids are given with respect to the common mother volume of both solids.

5/16/2012
 - allowing for beam energies up to 100 GeV, vertexes range of 100m  in the GUI

5/15/2012
 - Event Action:

   Limiting loop on NGENP option number of generated particle.
   This should speed up considerably the simulation in case of high luminosity beams.

   WARNING: I tested this for very high luminosity. Turns out that GEANT4 has some (already documented)
   memory leak in G4PrimaryParticle destructor, see "Particle" forum thread 405.

 - materials: added vacuum at 10^-9

5/14/2012
 - added access to PCAL parameters in hitprocess

5/8/2012
 - reinserted default charge sharing for PCAL


4/26/2012
 - keeping beam and target polarizations in the output stream
 - macros to rotate, zoom in steps


4/24/2012
 - added new hit type (FTH), bank (FTH) and related hit process routine for Forward Tagger Hodoscope
 - no hardcoded number in the micromegas hit process routines


4/23/2012
 - change HTCC last identifier to nphe_pmt so the GUI can catch the nphe
 - added optical properties to hit process routines

4/20/2012
 - lab char size was too small
 - making compiler happy - updated revision number
 - GEMC can now read geant4 optical properties from a MYSQL DB. The MYSQL material factory is now equivalent to the CPP one.
 - Added utility function get_strings that will return a vector<string> from a string using the stringsteam method
 - Warning fixed in the HTCC process routines
 - Changed name of material maps from MMats to mats

4/19/2012
 - added MYSQL interface to optical properties, cleaned up cpp material factory

4/18/2012
 - Added template for optical properties upload.
 - Refining geant4 material definition. Cleaning up code.

4/16/2012
 - fixed problem with field-separating tab characters
 - Added case where the g4signal display optical photon hits instead of energy hits
 - Removed number of segments in HIGH_RES running.
   One can still set it in the GUI

4/12/2012
 - Material properties log only if verbosity activated.
 - Removed automatic rotation for "Beam every 2 seconds" button

 - A new factory has been introduced: "parameters".
   This factory stores the geometry parameters and make them available to the reconstruction routines.
   This factory currently support MYSQL.

   Inside each hit process routine, parameters can now be accessed with the "gpars" map,
   using the detector name and parameter name. For example::

    gpars["BST/nregions"] is equal to 4

4/9/2012
 - Added Mirrors in the hit definition list
 - Added sensitive detector: "Mirrors" with FLUX associated hit process routine.
   This will allow mirrors to use identifiers w/o recording the unnecessary hits on them.

   By default it will not record the particles hitting it.
   To record, use the option::

    -RECORD_MIRRORS=1

4/6/2012
 - added validation scripts to test compilation, running, geometry, etc
 - correcting cpp material factory: molecules can (and should) be formed by molecular components not fractional masses

4/5/2012
 - Migrating from custome element definitions to G4 Material database, both in CPP and MYSQL material factory.
   MYSQL factory finalized with:

   * custom elements
   * G4 material database components

   TODO:

   * Property Tables (for optical physics)
   * Make sure materials of materials is handled properly


4/4/2012
 - added start of mysql material factory. Added script to copy materials to clas12_geometry.
 - removed compiler warning. Added run_condition class as argument to material factory
 - DB interface to write materials to DB is completed

4/3/2012
 - added scripts to upload materials to DB
 - added explicit units for molar mass (g/mol)
 - Added elements file, perl scripts to upload elements materials in mysql DB
 - (Puckett) With this update, HTCC_hitprocess looks for the property "EFFICIENCY" to be defined for the
   material of the detector; e.g., a PMT photocathode. If it is found, then each optical photon
   is detected with probability corresponding to the efficiency. If the property "EFFICIENCY"
   has not been defined for the material of this sensitive detector, then all optical photons are detected.
 - (Puckett) In the processing of mirror definitions, I added the capability to use the optical properties
   of a pre-existing material instead of properties defined in the detector identifiers. This allows more
   flexible (wavelength-dependent) optical properties to be used for mirror surfaces. To use this functionality,
   the detector identifiers must contain: "WithMaterial: [material name] dummy" where [material name]
   is the name of a pre-existing material with defined optical properties and dummy is the integer "id"
   required to read in the "identifiers" line from the database. In this context "id" is a dummy variable
   that has no effect, but must be included or the database io will fail.
 - Added Materials factories: MYSQL, CPP, GDML


3/30/2012
 - added material factory to load materials from cpp_file, databases, gdml file
 - added limit of 1000 steps in one volume
 - added button to get events ever 2 seconds (for 4 hours) while camera rotates

3/23/2012
 - added phi-simmetric cylindrical coordinates around x or y axis
 - set process verbosity to zero by default

3/14/2012
 - Fixed bug that was deleting parameters.txt
 - Added starting angle for optical photon beam test
 - Corrected Vertex Spread to generate a uniform distribution on the raster circle, as opposed of uniform in R

3/9/2012
 - New digitization routine for BMT
 - New digitization routine for FMT
 - New digitization routine for FTM


3/9/2012
 - Fixed a typo "Operation:" was supposed to read "Operation:~"
	when support was added for operations with translation happening before the rotation

3/1/2012
 - Added gemc banks content


2/29/2012
 - Fixed bug for operations with "~" (translation occurs before rotation)

2/24/2012
 - Added G4Paraboloid and G4Hype

2/20/2012
 - Corrected and improved bst strip finding routine

2/10/2012
 - Added units to parameter files perl functions
 - Added perl mysql database paramters i/o

2/9/2012
 - better mysql security

2/3/2012
 - Checking that Hit Collection exists before getting hits in the signal gui
 - Improved MDetector construction
 - Building operands of sold operations or copies first. Users do not need anymore to order them in alphabetical order.

.. Note::
   1/26/2012 working gemc version 1.6 revision 5588

|


 1/26/2012
 - Magnetic field location based on JLAB_ROOT env. variable. Maybe a MAG_FIELDS_DIR is better but let's go with this for now.
 - Updated version on the doc tab
 - Livermore low e.m. physics according to new G4 9.5
 - Added id_sharing = 1 for all hit processes that do not share hit / step
 - OpenGL immediate mode is the new default as stored mode is not working on Mac (G4 people working on it).

1/12/2012
 - Added multiple hits for a single step.
 - Any number of hits can now be generated from a single geant4 step.
 - Immediate applications: silicon and micromegas detector for charge sharing.


12/22/2011
 - Updated RICH hitprocess with pixel information and quantum efficiency.
 - Added wavelength dependent reflectivity for RICH mirrors.

12/2/2011
 - fix bug in B x dr calculation

11/29/2011
 - Propagating "exist" to second and third generation

11/17/2011
 - Checking existance of "mother" volume before asking for the exist flag
 - Unsigned int i changed to ir to avoid possible conflicts with the map iterator
 - Improvement in the handling of mirrors. Cosmetic improvements in the log. Peek material refined

10/25/2011
 - new light transmission efficiency, new APD q.e.,gain and noise, new preamp noise

10/7/2011
 - light yield changed to typeII crystals and apd size to large areas

9/22/2011
 - Fixed option repetition bug

9/19/2011
 - Added capability to scale multiple magnetic fields separately

9/12/2011
 - Added support for multiple instances of options in command line argument and in the gcard.

9/2/2011
 - Increased icon space for linux GUI
 - Typo on Luminosity Tab
 - Corrected help for hit process: lists are separated by spaces, not commas

8/31/2011
 - gemc logo on a place w/o certificate so it's visible in the "about" tab
 - Added HTML option table with the option: -help-html


8/5/2011
 - Filter out "-psn" for argument. This is added on Mac when launching an app.

7/29/2011
 - GL path removed, added on scons script - some system have it some do not
 - Fixed Sensitive detector edep bug (was not recording any output)

7/27/2011
 - Added GDML support

7/25/2011
 - Added button jpg, corrected atomic weight of chlorine

.. Note::
   7/25/2011 working gemc version 1.5 revision 4756

|


7/19/2011
 - **signal interface**
   For now it will display the single step informations for each hit, and graphs of energy deposited.

   In the future it will display the signal in volt versus time.

   By default the tracks passing through a material without depositing any energy will not be recored.
   The flag RECORD_PASSBY can be set to 1 if you want to record these.

 - Corrected "about" page.


6/14/2011
 - improved magnetic field log

5/15/2011
 - add "solid" hit processes list

5/13/2011
 - Step size to define a track as "stuck" decreased to  0.00001 mm

5/12/2011
 - Added UImanager->SetCoutDestination(NULL);
   this will redirect all cout and G4out to the screen.

 - "pick" command is now available.


5/10/2011
 - Added SkinSurface myrror type.
 - Added SemiReflective mirrors "SemiMirror"
 - In SteppingAction: kill optical photons generated in semimirror (or they reflect forever because of refraction indexes)
 - In StepngAction: kill tracks that do not change position after 10 steps





